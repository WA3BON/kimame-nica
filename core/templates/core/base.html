{% load static tailwind_tags %}
<!DOCTYPE html>
<html lang="ja" class="scroll-smooth">
<head>
  {% tailwind_css %}

  <title>{% block title %}{{ company_info.ogp_title}}{% endblock %}</title>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">

  {# CSS js #}
  <link rel="stylesheet" href="{% static 'css/dist/styles.css' %}">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.3/dist/css/splide.min.css">

  {# favicon #}
  {% if company_info.favicon %}
    <link rel="icon" href="{{ company_info.favicon.url }}">
    <link rel="apple-touch-icon" href="{{ company_info.favicon.url }}">
  {% endif %}

  {# OGP #}
  <meta property="og:type" content="website">
  <meta property="og:title" content="{{ company_info.ogp_title|default:company_info.name }}">
  <meta property="og:description" content="{{ company_info.ogp_description|default:company_info.description }}">
  <meta property="og:url" content="{{ request.build_absolute_uri }}">
  {% if company_info.ogp_image %}
    <meta property="og:image" content="{{ company_info.ogp_image.url }}">
  {% endif %}
</head>
<body class="relative bg-black text-[#9e7b3b]">

<header 
    x-data="{ scrolled: false, open: false }" 
    x-init="window.addEventListener('scroll', () => { scrolled = window.scrollY > 50 })"
    class="fixed top-0 left-0 w-full z-30 transition-all duration-500">
  <div 
        style="background-image: url('{% static "core/images/texture_Pbrown.jpg" %}');"
        class="w-full bg-center bg-repeat px-8 py-2 flex justify-between items-center transition-all duration-500 brightness-120"
    >
    <a href="{% url 'core:index' %}" class="flex items-center">
      <img src="{{ company_info.favicon.url }}" alt="{{ company_info.name }}" class="h-10 w-auto">
      <img  src="{{ company_info.title.url }}" alt="{{ company_info.name }}" class="h-10 w-auto">
    </a>

    <!-- PC menu -->
    <nav class="hidden md:flex space-x-6 font-bold items-center text-[#9e7b3b]">
      <a href="{% url 'core:index' %}" class="border border-transparent py-2 px-2 rounded-xl hover:border-[#9e7b3b] transition">ホーム</a>
      <a href="{% url 'core:index' %}#products" class="border border-transparent py-2 px-2 rounded-xl hover:border-[#9e7b3b] transition">商品一覧</a>
      <a href="{% url 'core:index' %}#company" class="border border-transparent py-2 px-2 rounded-xl hover:border-[#9e7b3b] transition">会社情報</a>
      <a href="{% url 'core:contact' %}" class="border border-transparent py-2 px-2 rounded-xl hover:border-[#9e7b3b] transition">お問合せ</a>
      <a href="{% url 'core:estimate' %}" class="px-6 py-2 bg-[#9e7b3b] text-black rounded-xl border border-transparent hover:bg-black hover:text-[#9e7b3b] hover:border-[#9e7b3b] transition">お見積り</a>
    </nav>
    
    <!-- Hamburger -->
     <button @click="open = !open" class="relative z-50 w-8 h-8 flex items-center justify-center md:hidden" aria-label="Menu">
      <span class="absolute w-6 h-0.5 bg-[#9e7b3b] transition-all duration-300" :class="open ? 'rotate-45' : '-translate-y-2'"></span>
      <span class="absolute w-6 h-0.5 bg-[#9e7b3b] transition-all duration-300" :class="open ? 'opacity-0' : ''"></span>
      <span class="absolute w-6 h-0.5 bg-[#9e7b3b] transition-all duration-300" :class="open ? '-rotate-45' : 'translate-y-2'"></span>
    </button>
  </div>

  <!-- Mobile menu -->
  <div
    x-show="open"
    x-transition
    class="fixed inset-0 bg-black z-50 flex flex-col items-center justify-center space-y-8 text-[#9e7b3b] text-xl"
  >
    <!-- close btn -->
    <button @click="open = false" class="absolute top-1 right-8 text-[#9e7b3b] text-5xl">
      &times;
    </button>

    <a @click="open = false" href="{% url 'core:index' %}" class="border border-transparent py-2 px-2 rounded-xl hover:border-[#9e7b3b] transition">ホーム</a>
    <a @click="open = false" href="{% url 'core:index' %}#products" class="border border-transparent py-2 px-2 rounded-xl hover:border-[#9e7b3b] transition">商品一覧</a>
    <a @click="open = false" href="{% url 'core:index' %}#company" class="border border-transparent py-2 px-2 rounded-xl hover:border-[#9e7b3b] transition">会社概要</a>
    <a @click="open = false" href="{% url 'core:contact' %}" class="border border-transparent py-2 px-2 rounded-xl hover:border-[#9e7b3b] transition">お問合せ</a>
    <a href="{% url 'core:estimate' %}" class="w-[40%] sm:w-[20%] bg-[#9e7b3b] text-black py-3 px-6 rounded-xl font-semibold text-center border border-transparent hover:bg-black hover:text-[#9e7b3b] hover:border-[#9e7b3b] transition">お見積り</a>
  </div>
</header>

<main>
  {% block content %}{% endblock %}
</main>

<footer style="background-image: url('{% static "core/images/texture_Pbrown.jpg" %}');" class="w-full bg-center bg-repeat flex brightness-170">
  <div class="max-w-6xl text-black mx-auto px-6 py-10">
    <div class="flex flex-row items-center justify-center mb-6">
      {% if company_info.logo %}
      <img src="{{ company_info.favicon.url }}" alt="{{ company_info.name }}" class="w-[10%] md:w-[5%] h-auto">
      {% endif %}
      {% if company_info.title %}
      <img src="{{ company_info.title.url }}" alt="{{ company_info.name }}" class="w-[50%] md:w-[25%] h-auto">
      {% endif %}
    </div>
    <nav class="flex flex-col md:flex-row md:space-x-10 space-y-2 md:space-y-0 text-center justify-center text-sm">
      <a href="{% url 'core:index' %}#company" class="hover:text-black/80">会社概要</a>
      <a href="{% url 'core:order_policy' %}" class="hover:text-black/80">特定商取引法に基づく表記</a>
      <a href="{% url 'core:privacy_policy' %}" class="hover:text-black/80">プライバシーポリシー</a>
      <a href="{% url 'core:terms_of_service' %}" class="hover:text-black/80">利用規約</a>
      <a href="{% url 'core:app_policy' %}" class="hover:text-black/80">アプリケーション規約</a>
      <a href="{% url 'core:contact' %}" class="hover:text-black/80">お問い合わせ</a>
    </nav>

    <div class="mt-6 border-t border-black/50 pt-4 text-sm font-bold text-center">
      Copyright © KiMame All Rights Reserved.
    </div>
  </div>
</footer>
<script src="{% static 'core/js/common.js' %}"></script>
<script src="https://cdn.jsdelivr.net/npm/alpinejs@3.13.0/dist/cdn.min.js" defer></script>
<script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@4.1.3/dist/js/splide.min.js"></script>
</body>
</html>